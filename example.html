<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<script src="classes/UX.js"></script>

	<style>
		html {
			background: #222;
		}
		.user-choice-popin {
			
		}
		.user-choice-popin .popin-content {
			max-width: 100%;
			width: 520px; 
			background-color: #fff;
			padding: 0 !important; 
		}
		.user-choice-popin .btn-container {
			padding: 0 1em;
		}
		.user-choice-popin .btn-container:hover {
			background: #f6f6f6; 
		}
		.user-choice-popin button {
			cursor: pointer;
		}
		.user-choice-popin #cancel-btn {
			border: none; 
			text-decoration: underline;
		}
		.user-choice-popin #confirm-btn {
			margin: 1em;
			border: none;
			padding: 1em;
			border-radius: 5px;
			transition: background-color ease 320ms; 
		}
		.user-choice-popin #confirm-btn:hover {
			background: #333; 
			color: #ddd; 
		}

		.quick-notification {
			background-color: #F9A825 !important;
		}
	</style>
</head>
<body>
	

	<button onclick="new QuickToast('Le message est affiché ici pendant 3 secondes', 3000).display(); ">Afficher un message d'info</button>
	<button onclick="new UserChoice(`<span style='font-weight: bold; font-size: 1.6em; line-height: 2; '>Ici le message :</span><br/>Êtes-vous sûr de vouloir continuer ?`, 'Continuer', 'Annuler').waitFor().then(()=>new QuickToast().display({message: 'L\'action a bien été effectuée'})); ">Fenêtre de confirmation</button>


	<form id="login-form">
		<input type="text" name="login" placeholder="Identifiant" value="other@email.com">
		<input type="password" name="password" placeholder="Mot de passe" value="poumpoum">
		<button id="submit-login">Valider</button>
	</form>



	<script src="scripts/search-book.js"></script>
	<script>
		
		
		
		// getSingleBookInformation('LVaGAQAAQBAJ')
		// 	.then(data => console.log(data))
		// 	.catch(err => console.log(err)); 

		

		// let searchParam = new URLSearchParams(window.location.search); 

		// open : dreee.html?import=LVaGAQAAQBAJ;WyBREAAAQBAJ;vVeGAQAAQBAJ
		// console.log(searchParam.get('import').split(';')); 

		// getBooksInfosThroughListOfIDs(searchParam.get('import').split(';'))
		// 	.then(res => console.log('ola', res)) // on reçoit un tableau de JSON pour chaque livre dont on a fourni l'ID
		// 	.catch(err => console.warn('ERR :: ', err)); 


		function removeDuplicates(array) {
			let output = []; 
			array.forEach(item => {
				if (output.indexOf(item) < 0) {
					output.push(item); 
				}
			});
			return output; 
		}


		// test login : 
		$('#submit-login').addEventListener('click', event => {
			event.preventDefault(); 
			let data = new FormData($('#login-form')); 

			console.log(data.get('login')); console.log(data.get('password')); 

			let options = {
				method: 'POST'
			}
			options.body = data; 

			// let url = "http://localhost/test-json-in-db/index.php?route=auth"; 
			let url = 'http://theokne.cluster021.hosting.ovh.net/index.php?route=auth'; 
			
			fetch(url, options)
				.then(res => res.text())
				.then(res => { 
					console.log(res); 
					console.log(JSON.parse(res)); 
				 })
				.catch(err => console.log(err)); 
		})

		function saveToken(token) {
			localStorage.setItem('_tok_vghfT', token); 
		}

		function $(selector) {
			return document.querySelector(selector); 
		}
		
	</script>
</body>
</html>